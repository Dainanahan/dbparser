<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saving data into Database â€¢ dbparser</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Saving data into Database">
<meta property="og:description" content="dbparser">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dbparser</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dbparser.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Database_Saving.html">Saving data into Database</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/dbparser/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Saving data into Database</h1>
                        <h4 class="author">Mohammed Ali</h4>
            
            <h4 class="date">2020-05-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/dbparser/blob/master/vignettes/Database_Saving.Rmd"><code>vignettes/Database_Saving.Rmd</code></a></small>
      <div class="hidden name"><code>Database_Saving.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>This tutorial aims to explain how <code>dbparser</code> can work along with R database functionalities to save parsed drug tibbles to the user desired databases. This tutorial addresses the following three options:</p>
<ul>
<li><a href="https://github.com/r-dbi/RSQLite">SQLite</a></li>
<li><a href="https://db.rstudio.com/dbi/">RDBMS</a></li>
<li><a href="https://github.com/r-dbi/RMariaDB">Maria Knowledge Base</a></li>
</ul>
<p><em>Please note that this tutorial does not explain how to install these databases as it is out of scope.</em></p>
<div id="sqlite" class="section level3">
<h3 class="hasAnchor">
<a href="#sqlite" class="anchor"></a>SQLite</h3>
<p>SQLite is an inmemory database you can use locally easily. To save drug information using this database run the following</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Load dbparser package</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dbparser</span>)
<span class="co"># Create SQLite database connection</span>
<span class="no">database_connection</span> <span class="kw">&lt;-</span> <span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span>(<span class="kw pkg">RSQLite</span><span class="kw ns">::</span><span class="fu"><a href="https://rsqlite.r-dbi.org/reference/SQLite.html">SQLite</a></span>(), <span class="st">":memory:"</span>)
<span class="co"># DrugBank database sample name</span>
<span class="no">biotech</span> <span class="kw">&lt;-</span> <span class="st">"drugbank_record_biotech.xml"</span>
<span class="co"># Use DrugBank sample database in the library</span>
<span class="fu"><a href="../reference/read_drugbank_xml_db.html">read_drugbank_xml_db</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="no">biotech</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dbparser"</span>))
<span class="co"># Parse all available drug tibbles</span>
<span class="fu"><a href="../reference/drug_all.html">drug_all</a></span>(<span class="kw">save_table</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">database_connection</span> <span class="kw">=</span> <span class="no">database_connection</span>)
<span class="co"># List saved tables</span>
<span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbListTables.html">dbListTables</a></span>(<span class="no">database_connection</span>)
<span class="co"># Close SQLite connection</span>
<span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html">dbDisconnect</a></span>(<span class="no">database_connection</span>)</pre></body></html></div>
</div>
<div id="dbi-supported-databases" class="section level3">
<h3 class="hasAnchor">
<a href="#dbi-supported-databases" class="anchor"></a>DBI Supported Databases</h3>
<p><code>DBI</code> separates the connectivity to the DBMS into a <em>front-end</em> and a <em>back-end</em>. Applications use only the exposed front-end API. The back-end facilities that communicate with specific DBMSs (SQLite, MySQL, PostgreSQL, MonetDB, etc.) are provided by drivers (other packages) that get invoked automatically through S4 methods. For more information about DBI package please refer to <a href="https://db.rstudio.com/dbi/">this link</a></p>
<p>The following are two examples of how to make the connection with <em>SQL Server</em> and <em>Maria DB</em></p>
<div id="sql-server" class="section level4">
<h4 class="hasAnchor">
<a href="#sql-server" class="anchor"></a>SQL Server</h4>
<ul>
<li>Make sure you have a working connection to <em>SQL Server</em> instance <img src="../../../DS%20Projects/dbparser/vignettes/sql_connection.png">
</li>
<li>Create new empty database to store drug information <img src="../../../DS%20Projects/dbparser/vignettes/new_database.png">
</li>
<li>Execute the following commands</li>
</ul>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Load dneeded packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dbparser</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">odbc</span>)
<span class="co"># Create SQLServer database connection</span>
<span class="no">con</span> <span class="kw">&lt;-</span> <span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html">dbConnect</a></span>(<span class="kw pkg">odbc</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/odbc/man/odbc.html">odbc</a></span>(), <span class="kw">Driver</span> <span class="kw">=</span> <span class="st">"SQL Server"</span>, <span class="kw">Server</span> <span class="kw">=</span> <span class="st">"MOHAMMED\\SQL2016"</span>,
    <span class="kw">Database</span> <span class="kw">=</span> <span class="st">"drugbank"</span>, <span class="kw">Trusted_Connection</span> <span class="kw">=</span> <span class="no">T</span>)
<span class="co"># Use DrugBank sample database in the library</span>
<span class="no">biotech</span> <span class="kw">&lt;-</span> <span class="st">"drugbank_record_biotech.xml"</span>
<span class="co"># DrugBank database sample name</span>
<span class="fu"><a href="../reference/read_drugbank_xml_db.html">read_drugbank_xml_db</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="no">biotech</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dbparser"</span>))
<span class="co"># Parse all available drug tibbles</span>
<span class="fu"><a href="../reference/drug_all.html">drug_all</a></span>(<span class="kw">save_table</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">database_connection</span> <span class="kw">=</span> <span class="no">con</span>)
<span class="co"># List saved tables</span>
<span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbListTables.html">dbListTables</a></span>(<span class="no">con</span>)
<span class="co"># Close SQLServer connection</span>
<span class="kw pkg">DBI</span><span class="kw ns">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html">dbDisconnect</a></span>(<span class="no">con</span>)</pre></body></html></div>
<p>Then refresh your database to see new tables <img src="../../../DS%20Projects/dbparser/vignettes/sql_tables.png"></p>
</div>
<div id="maria-knowledge-base" class="section level4">
<h4 class="hasAnchor">
<a href="#maria-knowledge-base" class="anchor"></a>Maria Knowledge Base</h4>
<ul>
<li>Install MariaDB</li>
<li>Install MySQL client for MariaDB</li>
<li>Create new empty database to store drug information</li>
</ul>
<p><img src="../../../DS%20Projects/dbparser/vignettes/new_database_2.png"></p>
<ul>
<li>Execute the following commands</li>
</ul>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># Load dneeded packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dbparser</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">RMariaDB</span>)
<span class="co"># Create SQLServer database connection</span>
<span class="no">con</span> <span class="kw">&lt;-</span> <span class="kw pkg">RMariaDB</span><span class="kw ns">::</span><span class="fu">dbConnect</span>(<span class="kw pkg">RMariaDB</span><span class="kw ns">::</span><span class="fu"><a href="https://rmariadb.r-dbi.org/reference/dbConnect-MariaDBDriver-method.html">MariaDB</a></span>(), <span class="kw">Server</span> <span class="kw">=</span> <span class="st">"MariaDB"</span>,
                           <span class="kw">dbname</span> <span class="kw">=</span> <span class="st">"drugbank"</span>, <span class="kw">username</span><span class="kw">=</span><span class="st">"root"</span>,
                           <span class="kw">password</span><span class="kw">=</span><span class="st">"root"</span>)
<span class="co"># Use DrugBank sample database in the library</span>
<span class="no">biotech</span> <span class="kw">&lt;-</span> <span class="st">"drugbank_record_biotech.xml"</span>
<span class="co"># DrugBank database sample name</span>
<span class="fu"><a href="../reference/read_drugbank_xml_db.html">read_drugbank_xml_db</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="no">biotech</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dbparser"</span>))
<span class="co"># Parse all available drug tibbles</span>
<span class="fu"><a href="../reference/drug_all.html">drug_all</a></span>(<span class="kw">save_table</span> <span class="kw">=</span> <span class="fl">TRUE</span>, <span class="kw">database_connection</span> <span class="kw">=</span> <span class="no">con</span>)
<span class="co"># List saved tables</span>
<span class="kw pkg">RMariaDB</span><span class="kw ns">::</span><span class="fu">dbListTables</span>(<span class="no">con</span>)
<span class="co"># Close SQLServer connection</span>
<span class="kw pkg">RMariaDB</span><span class="kw ns">::</span><span class="fu">dbDisconnect</span>(<span class="no">con</span>)</pre></body></html></div>
<p>Then refresh your database to see new tables <img src="../../../DS%20Projects/dbparser/vignettes/maria_tables.png"></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="http://mohammedfcis.github.io">Mohammed Ali</a>, <a href="https://www.linkedin.com/in/aliezzat1985/">Ali Ezzat</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
